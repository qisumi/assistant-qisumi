# Agent & Tools Schema 实现 TODO 列表

## 1. 通用约定实现
- [ ] 实现中英文语言处理支持
- [ ] 实现ISO 8601时间格式处理
- [ ] 实现ID管理逻辑（确保LLM只使用后端传入的ID）
- [ ] 实现OpenAI tools/function calling机制

## 2. 共享 Tools Schema 实现
### 2.1 将JSON Schema转换为Go结构体
- [ ] 定义ToolFunction结构体
- [ ] 定义ToolCall结构体
- [ ] 定义ToolResponse结构体

### 2.2 实现各工具函数
- [ ] 实现update_task工具：更新任务元数据
- [ ] 实现update_steps工具：更新任务步骤
- [ ] 实现add_steps工具：添加新步骤
- [ ] 实现add_dependencies工具：创建任务/步骤依赖
- [ ] 实现mark_tasks_focus_today工具：标记今日重点任务

## 3. Agent Prompt 实现
### 3.1 TaskCreationAgent
- [ ] 实现系统提示词常量
- [ ] 实现从文本生成任务的逻辑
- [ ] 实现JSON解析逻辑

### 3.2 ExecutorAgent
- [ ] 实现系统提示词常量
- [ ] 实现执行类指令解析
- [ ] 实现步骤状态更新逻辑
- [ ] 实现任务元数据更新逻辑

### 3.3 PlannerAgent
- [ ] 实现系统提示词常量
- [ ] 实现任务规划逻辑
- [ ] 实现步骤拆分逻辑
- [ ] 实现日程重排逻辑
- [ ] 实现依赖关系创建逻辑

### 3.4 SummarizerAgent
- [ ] 实现系统提示词常量
- [ ] 实现任务进度总结逻辑
- [ ] 实现对话历史总结逻辑

### 3.5 GlobalAgent
- [ ] 实现系统提示词常量
- [ ] 实现跨任务数据聚合逻辑
- [ ] 实现今日计划生成逻辑
- [ ] 实现本周安排生成逻辑
- [ ] 实现过期任务提醒逻辑

### 3.6 RouterAgent
- [ ] 实现系统提示词常量
- [ ] 实现基于规则的路由逻辑
- [ ] 实现LLM fallback路由逻辑

## 4. Chat Completions 流程实现
- [ ] 实现请求构建逻辑
- [ ] 实现LLM调用逻辑
- [ ] 实现工具调用处理逻辑
- [ ] 实现工具执行结果处理逻辑
- [ ] 实现最终回复生成逻辑

## 5. 示例代码实现
- [ ] 实现ExecutorAgent完整请求示例
- [ ] 实现工具调用-执行-回复的完整流程示例

## 6. 集成与测试
- [ ] 将Agent与现有系统集成
- [ ] 编写单元测试
- [ ] 编写集成测试
- [ ] 进行功能测试

## 7. 优化与改进
- [ ] 优化Prompt模板
- [ ] 优化工具调用逻辑
- [ ] 优化LLM响应处理
- [ ] 实现错误处理机制
